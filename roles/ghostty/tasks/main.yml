- name: Install ghostty on MacOS
  community.general.homebrew:
    name: ghostty
    state: present
  when: ansible_facts['os_family'] == "Darwin"

- name: Enable ghostty COPR Repo
  when: ansible_facts['os_family'] == "RedHat"
  community.general.copr:
    name: scottames/ghostty
    state: enabled
  become: true
- name: Install ghostty Linux
  when: ansible_facts['os_family'] == "RedHat"
  ansible.builtin.package:
    name: "ghostty"
  become: true

- name: Make .config directory
  ansible.builtin.file:
    path: ~/.config
    state: directory
    mode: "0755"

- name: Symlink config
  ansible.builtin.file:
    src: "{{ ansible_env.PWD }}/roles/ghostty/files"
    path: ~/.config/ghostty
    state: link
